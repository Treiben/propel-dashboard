@Ui_Api_HostAddress_Https = https://localhost:7113
@Ui_Api_HostAddress_Http = http://localhost:5038
@Ui_Api_HostAddress_Docker = http://localhost:5003

### Variables
@baseUrl = {{Ui_Api_HostAddress_Http}}/api
@testFlagKey = test-flag-4851245
@testUserId = user-{{$randomInt}}

### Authentication Tokens
@api_jwt = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6IkFwaVNjb3BlVXNlciIsInN1YiI6IkFwaVNjb3BlVXNlciIsImp0aSI6IjNhZWVjZWRlIiwic2NvcGUiOiJmZWF0dXJldG9nZ2xlc21hbmFnZW1lbnRhcGkiLCJhdWQiOlsiaHR0cDovL2xvY2FsaG9zdDo1MDM4IiwiaHR0cHM6Ly9sb2NhbGhvc3Q6NzExMyJdLCJuYmYiOjE3NTM1MDAyNjEsImV4cCI6MTc2MTQ0OTA2MSwiaWF0IjoxNzUzNTAwMjYyLCJpc3MiOiJkb3RuZXQtdXNlci1qd3RzIn0.r1u7xaYjgAFoVsx6ddDJLtXIuYWlyUHAQC7UZkjojIw
@readonly_jwt =  eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6IlJlYWRVc2VyIiwic3ViIjoiUmVhZFVzZXIiLCJqdGkiOiI2MTczNDRlIiwic2NvcGUiOlsiZmVhdHVyZXRvZ2dsZXNtYW5hZ2VtZW50YXBpIiwicmVhZCJdLCJhdWQiOlsiaHR0cDovL2xvY2FsaG9zdDo1MDM4IiwiaHR0cHM6Ly9sb2NhbGhvc3Q6NzExMyJdLCJuYmYiOjE3NTM1MDAzNDgsImV4cCI6MTc2MTQ0OTE0OCwiaWF0IjoxNzUzNTAwMzQ5LCJpc3MiOiJkb3RuZXQtdXNlci1qd3RzIn0.YiW9_-swA8YXVaukSsKiZg-us_3YW0QCGwMtWb-HB4M
# @full_access_jwt = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6IkZ1bGxBY2Nlc3NVc2VyIiwic3ViIjpbIkZ1bGxBY2Nlc3NVc2VyIiwidGVzdC11c2VyLTEyMyJdLCJqdGkiOiI1N2Q5MDM1NSIsInNjb3BlIjpbInByb3BlbC1kYXNoYm9hcmQtYXBpIiwicmVhZCIsIndyaXRlIl0sIm5hbWUiOiJUZXN0IFVzZXIiLCJlbWFpbCI6InRlc3RAZXhhbXBsZS5jb20iLCJhdWQiOlsiaHR0cDovL2xvY2FsaG9zdDo1MDM4IiwiaHR0cHM6Ly9sb2NhbGhvc3Q6NzExMyJdLCJuYmYiOjE3NTkxNzM3MjgsImV4cCI6MTc2NzAzNjEyOCwiaWF0IjoxNzU5MTczNzI5LCJpc3MiOiJkb3RuZXQtdXNlci1qd3RzIn0.sH_Tqm3NoFN8O6obC1ZpFJuSvKLh74JQKzVA1bvZlOc
@full_access_jwt = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6IkZ1bGxBY2Nlc3NVc2VyIiwic3ViIjoiRnVsbEFjY2Vzc1VzZXIiLCJqdGkiOiJjZDZkMzUxNiIsInNjb3BlIjpbInByb3BlbC1kYXNoYm9hcmQtYXBpIiwicmVhZCIsIndyaXRlIl0sIm5hbWUiOiJUZXN0IFVzZXIiLCJlbWFpbCI6InRlc3RAZXhhbXBsZS5jb20iLCJhdWQiOlsiaHR0cDovL2xvY2FsaG9zdDo1MDM4IiwiaHR0cHM6Ly9sb2NhbGhvc3Q6NzExMyJdLCJuYmYiOjE3NTkxNzcxMzEsImV4cCI6MTc2NzAzOTUzMSwiaWF0IjoxNzU5MTc3MTMyLCJpc3MiOiJkb3RuZXQtdXNlci1qd3RzIn0.pfxS09l3Rq_RZCzLuhVWuYlrmVxEWOFlj5n89ywspHA

@active_token = {{full_access_jwt}}


###
### ================== BACKWARD COMPATIBILITY TESTS ==================

### Compat 1. Old GetAll Endpoint Still Works
# Test: Verify /all endpoint still functions for backward compatibility
# Expected: 200 OK with List<FeatureFlagDto> (not paged response)
GET {{baseUrl}}/feature-flags/all
Authorization: Bearer {{active_token}}

###
### Compat 2. Compare Paged vs GetAll Results
# Test: Verify paged endpoint returns same data as GetAll when requesting all data
# Expected: First page with large pageSize should match /all results
GET {{baseUrl}}/feature-flags?page=1&pageSize=1000
Authorization: Bearer {{active_token}}
X-Scope: Application
X-Application-Name:
X-Application-Version: 1.0.0.0

###
### 3. Get Specific Feature Flag
# Test: Retrieve a specific flag by key
# Expected: 200 OK with FeatureFlagDto for the requested flag
GET {{baseUrl}}/feature-flags/{{testFlagKey}}
Authorization: Bearer {{active_token}}
X-Scope: Application
X-Application-Name:
X-Application-Version: 1.0.0.0

###
### 4. Get Non-existent Feature Flag
# Test: Verify proper error handling for missing flag
# Expected: 404 Not Found with problem details
GET {{baseUrl}}/feature-flags/advanced-search-engine
Authorization: Bearer {{active_token}}
X-Scope: Application
X-Application-Name: WebClientDemo
X-Application-Version: 1.0.0.0
