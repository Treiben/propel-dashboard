@Ui_Api_HostAddress_Https = https://localhost:7113
@Ui_Api_HostAddress_Http = http://localhost:5038
@Ui_Api_HostAddress_Docker = http://localhost:5003

### Variables
@baseUrl = {{Ui_Api_HostAddress_Http}}/api
@testFlagKey = test-flag-4851245
@testUserId = user-{{$randomInt}}

### Authentication Tokens
### dotnet user-jwts create --scope "propel-dashboard-api" --name "ApiScopeUser" --project "ui/Propel.FeatureFlags.Dashboard.Api"
### dotnet user-jwts create --scope "propel-dashboard-api" --scope "read" --name "ReadUser" --project "ui/Propel.FeatureFlags.Dashboard.Api"
### dotnet user-jwts create --scope "propel-dashboard-api" --scope "read" --scope "write" --name "WriteUser" --project "ui/Propel.FeatureFlags.Dashboard.Api"
### dotnet user-jwts create --scope "propel-dashboard-api" --scope "read" --scope "write" --name "FullAccessUser" --claim "name=Test User" --claim "email=test@example.com" --project "dashboard/Propel.FeatureFlags.Dashboard.Api"
@api_jwt = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6IkFwaVNjb3BlVXNlciIsInN1YiI6IkFwaVNjb3BlVXNlciIsImp0aSI6IjNhZWVjZWRlIiwic2NvcGUiOiJmZWF0dXJldG9nZ2xlc21hbmFnZW1lbnRhcGkiLCJhdWQiOlsiaHR0cDovL2xvY2FsaG9zdDo1MDM4IiwiaHR0cHM6Ly9sb2NhbGhvc3Q6NzExMyJdLCJuYmYiOjE3NTM1MDAyNjEsImV4cCI6MTc2MTQ0OTA2MSwiaWF0IjoxNzUzNTAwMjYyLCJpc3MiOiJkb3RuZXQtdXNlci1qd3RzIn0.r1u7xaYjgAFoVsx6ddDJLtXIuYWlyUHAQC7UZkjojIw
@readonly_jwt =  eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6IlJlYWRVc2VyIiwic3ViIjoiUmVhZFVzZXIiLCJqdGkiOiI2MTczNDRlIiwic2NvcGUiOlsiZmVhdHVyZXRvZ2dsZXNtYW5hZ2VtZW50YXBpIiwicmVhZCJdLCJhdWQiOlsiaHR0cDovL2xvY2FsaG9zdDo1MDM4IiwiaHR0cHM6Ly9sb2NhbGhvc3Q6NzExMyJdLCJuYmYiOjE3NTM1MDAzNDgsImV4cCI6MTc2MTQ0OTE0OCwiaWF0IjoxNzUzNTAwMzQ5LCJpc3MiOiJkb3RuZXQtdXNlci1qd3RzIn0.YiW9_-swA8YXVaukSsKiZg-us_3YW0QCGwMtWb-HB4M
@full_access_jwt = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6IkZ1bGxBY2Nlc3NVc2VyIiwic3ViIjoiRnVsbEFjY2Vzc1VzZXIiLCJqdGkiOiJjZDZkMzUxNiIsInNjb3BlIjpbInByb3BlbC1kYXNoYm9hcmQtYXBpIiwicmVhZCIsIndyaXRlIl0sIm5hbWUiOiJUZXN0IFVzZXIiLCJlbWFpbCI6InRlc3RAZXhhbXBsZS5jb20iLCJhdWQiOlsiaHR0cDovL2xvY2FsaG9zdDo1MDM4IiwiaHR0cHM6Ly9sb2NhbGhvc3Q6NzExMyJdLCJuYmYiOjE3NTkxNzcxMzEsImV4cCI6MTc2NzAzOTUzMSwiaWF0IjoxNzU5MTc3MTMyLCJpc3MiOiJkb3RuZXQtdXNlci1qd3RzIn0.pfxS09l3Rq_RZCzLuhVWuYlrmVxEWOFlj5n89ywspHA

@active_token = {{full_access_jwt}}

###
### 1. Test Authorization - Read Only Token
# Test: Verify read-only token cannot perform write operations
# Expected: 403 Forbidden
POST {{baseUrl}}/feature-flags
Content-Type: application/json
Authorization: Bearer {{readonly_jwt}}

{
  "key": "unauthorized-flag",
  "name": "Should Fail",
  "description": "Read-only token should not be able to create flags"
}

###
### 2. Test Authorization - No Token
# Test: Verify requests without token are rejected
# Expected: 401 Unauthorized
GET {{baseUrl}}/flags
